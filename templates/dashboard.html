<!DOCTYPE html>
<html>
<body>

    <div style="background:#222;color:white;padding:10px;">
        <a href="/dashboard" style="color:white;margin-right:15px;">Dashboard</a>
        <a href="/upload-policy" style="color:white;margin-right:15px;">Upload Policy</a>

        {% if session.get("role") == "admin" %}
            <a href="/admin" style="color:white;margin-right:15px;">Admin Panel</a>
        {% endif %}

        <a href="/logout" style="color:white;">Logout</a>
    </div>
    <hr>

    <h2>Dashboard</h2>

    <a href="/add-policy">Add New Policy</a>
    <a href="/logout">Logout</a>
    <a href="/upload-policy">Upload New Policy (PDF)</a>

    <h3>Analytics</h3>

    <p><strong>Total Policies:</strong> {{ total_policies }}</p>

    <p><strong>Sentiment Distribution:</strong></p>
    <ul>
    <li>Positive: {{ sentiment_counts["Positive"] }}</li>
    <li>Negative: {{ sentiment_counts["Negative"] }}</li>
    <li>Neutral: {{ sentiment_counts["Neutral"] }}</li>
    </ul>

    <p><strong>Top Keywords:</strong></p>
    <ul>
    {% for word, count in top_keywords %}
    <li>{{ word }} ({{ count }})</li>
    {% else %}
    <li>No keywords yet.</li>
    {% endfor %}
    </ul>

    <hr>

    <h3>Your Policies</h3>

    {% for policy in policies %}
        <div>
            <h4>{{ policy[0] }}</h4>
            <p>{{ policy[1] }}</p>
            <p><strong>Sentiment:</strong> {{ policy[3] }}</p>
            <p><strong>Keywords:</strong> {{ policy[4] }}</p>
            <small>{{ policy[2] }}</small>
            <hr>
        </div>
    {% else %}
        <p>No policies yet.</p>
    {% endfor %}

</body>
</html>
