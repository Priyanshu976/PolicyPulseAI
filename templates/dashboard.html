{% extends "base.html" %}

{% block content %}

<h1>Dashboard Overview</h1>

<div class="analytics-grid">

    <div class="card">
        <h3>Total Policies</h3>
        <div class="big-number">{{ total_policies }}</div>
    </div>

    <div class="card">
        <h3>Average Impact Score</h3>
        <div class="big-number">{{ average_impact }}/100</div>
    </div>

</div>

<div class="card">
    <h3>Sentiment Distribution</h3>
    <canvas id="sentimentChart"></canvas>
</div>

<div class="card">
    <h3>Top Keywords</h3>
    <ul>
        {% for word, count in top_keywords %}
            <li>{{ word }} ({{ count }})</li>
        {% endfor %}
    </ul>
</div>

<script>
    const ctx = document.getElementById('sentimentChart');

    new Chart(ctx, {
        type: 'pie',
        data: {
            labels: {{ sentiment_counts.keys()|list|tojson }},
            datasets: [{
                data: {{ sentiment_counts.values()|list|tojson }},
            }]
        }
    });
</script>

{% endblock %}